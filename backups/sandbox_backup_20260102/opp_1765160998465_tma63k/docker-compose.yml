version: '3'
services:
  webapp:
    image: lifeos/microautomation:latest
    deploy:
      mode: "production"
      resources:
        limits: {}
        reservations: {"cpus": .5, "memory":2048}
    environment:
     DATABASE_URL: postgres://user@localhost/lifeos-microautomation?sslmode=require&connect_timeout=10s # Neon PostgreSQL with advanced security configurations for predictive maintenance data analysis.
  
  redis:
    image: "redis:alpine"
  
  nginx:
    image: "nginx:stable-alpine"
    ports:
      - "80:80" # Expose HTTP port as a reverse proxy for Express app and React frontend.
  
  api_gateway:
    build: .
    command: npm start --prefix services/api
    
  tasks-service:
    image: lifeos/microautomation-tasks:latest # Service creation endpoints to manage queued automated microservices tasks for users.
  
  revenue-tracking:
    build: .
    command: npm start --prefix services/revenue-tracking # Stripe API integration and payment tracking module within the service workflow system, including real-time conversion rates analytics on LifeOS Council members' platforms (web/mobile).
  
  database_service:
    image: lifeos/microautomation-database:latest # PostgreSQL with extended schema for task queue management.